document.addEventListener('DOMContentLoaded', (event) => {
    var modals = document.querySelectorAll('.modal');
    var spans = document.querySelectorAll('.close');
    var backButtons = document.querySelectorAll('.back-button');

    spans.forEach(span => {
        span.onclick = function () {
            modals.forEach(modal => modal.style.display = "none");
        }
    });

    backButtons.forEach(button => {
        button.onclick = function () {
            modals.forEach(modal => modal.style.display = "none");
        }
    });

    window.onclick = function (event) {
        if (event.target.classList.contains('modal')) {
            event.target.style.display = "none";
        }
    }

    // Добавление светлячков
    const fireflies = [
        { id: 'rulesModal', label: 'Правила' },
        { id: 'privacyModal', label: 'Политика' },
        { id: 'contactModal', label: 'Контакты' }
    ];

    fireflies.forEach((firefly, index) => {
        let el = document.createElement('div');
        el.className = 'firefly';
        el.textContent = firefly.label;
        el.style.top = `${Math.random() * window.innerHeight}px`;
        el.style.left = `${Math.random() * window.innerWidth}px`;
        el.dataset.x = el.style.left;
        el.dataset.y = el.style.top;
        el.dataset.direction = Math.random() * 360;
        document.body.appendChild(el);
    });

    function animateFireflies() {
        const fireflies = document.querySelectorAll('.firefly');
        const speed = 0.5; // Скорость движения

        fireflies.forEach(firefly => {
            let rect = firefly.getBoundingClientRect();
            let x = parseFloat(firefly.dataset.x);
            let y = parseFloat(firefly.dataset.y);
            let direction = parseFloat(firefly.dataset.direction);

            // Расчёт новых координат
            let newX = x + speed * Math.cos(direction * Math.PI / 180);
            let newY = y + speed * Math.sin(direction * Math.PI / 180);

            // Проверка границ экрана
            if (newX < 0 || newX > window.innerWidth - rect.width) {
                firefly.dataset.direction = 180 - direction;
                newX = Math.max(0, Math.min(window.innerWidth - rect.width, newX));
            }

            if (newY < 0 || newY > window.innerHeight - rect.height) {
                firefly.dataset.direction = -direction;
                newY = Math.max(0, Math.min(window.innerHeight - rect.height, newY));
            }

            // Установка новых координат
            firefly.style.left = `${newX}px`;
            firefly.style.top = `${newY}px`;

            // Обновление данных
            firefly.dataset.x = newX;
            firefly.dataset.y = newY;
        });

        requestAnimationFrame(animateFireflies);
    }

    animateFireflies();
});





